{% extends 'admin/base.html.twig' %}

{% block title %}Category{% endblock %}

{% block body %}
    <h1>Category </h1>
    <div class="container-fluid">
        <table class="table">
            <tbody>
            <tr>
                <th>Nom</th>
                <td>{{ category.name }}</td>
            </tr>
            <tr>
                <th>Position</th>
                <td>{{ category.position }}</td>
            </tr>
            </tbody>
        </table>
        <h2>Sous cat√©gorie</h2>
        <div class="sub-category-list rounded">
            {% for subCategory in category.subCategories %}
                <div class="row">
                    <div class="col-md-3 d-flex justify-content-between subcategory border border-black p-3 m-2 h-25"
                         id="{{ subCategory.id }}">
                        <h5>{{ subCategory.name }}</h5>
                        <i class="fa fa-arrow-right text-dark"></i>
                    </div>
                    <div class="products-list col-md-8">
                        {% for product in subCategory.products %}
                            <div class="product-item" data-cat="{{ subCategory.id }}">
                                {{ product.name }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <div class="d-flex">
        <a href="{{ path('admin_category_index') }}" class="btn btn-primary text-white"><i class="fa fa-arrow-left"></i></a>
        <a href="{{ path('admin_category_edit', {'slug': category.slug}) }}" class="btn btn-warning text-white mx-2"><i
                    class="fa fa-edit"></i></a>
        {{ include('admin/category/_delete_form.html.twig') }}
    </div>
    <script src="{{ asset('js/jquery-3.1.1.min.js') }}"></script>
    <script>
        let subCategory = $(".subcategory")
        let productItem = $(".product-item")
        subCategory.on("click", (e) => {
            productItem.each((event, value) => {
                if (value.target.data("cat") === e.target.id) {
                    value.target.show()
                }
            })
        })
    </script>
{% endblock %}
